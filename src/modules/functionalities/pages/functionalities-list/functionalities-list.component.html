
<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary"><i class="bi bi-gear-fill"></i> Funcionalidades</h2>
    <!-- <a routerLink="/functionalities/create" class="btn btn-success">
      <i class="bi bi-plus-circle"></i> Nova Funcionalidade
    </a> -->
  </div>

  <div *ngIf="loading" class="text-center py-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Carregando...</span>
    </div>
  </div>

  <div *ngIf="!loading && functionalities.length === 0" class="text-center py-5">
    <i class="bi bi-gear-fill display-1 text-muted"></i>
    <h4 class="mt-3 text-muted">Nenhuma funcionalidade encontrada</h4>
    <p class="text-muted">Comece criando sua primeira funcionalidade.</p>
    <a routerLink="/functionalities/create" class="btn btn-primary">
      <i class="bi bi-plus-circle"></i> Criar Funcionalidade
    </a>
  </div>

  <div *ngIf="!loading && functionalities.length > 0" class="table-responsive">
    <table class="table table-hover">
      <thead class="table-light">
        <tr>
          <th><i class="bi bi-tag-fill"></i> Nome</th>
          <th><i class="bi bi-text-paragraph"></i> Descrição</th>
          <th><i class="bi bi-currency-dollar"></i> Preço Mínimo</th>
          <th><i class="bi bi-cash-coin"></i> Preço Assistente</th>
          <th><i class="bi bi-toggle-on"></i> Status</th>
          <th><i class="bi bi-calendar"></i> Criado em</th>
          <th><i class="bi bi-gear"></i> Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let functionality of functionalities">
          <td>
            <strong>{{ functionality.name }}</strong>
          </td>
          <td>
            <span *ngIf="functionality.description; else noDescription">
              {{ functionality.description | slice:0:50 }}
              <span *ngIf="functionality.description.length > 50">...</span>
            </span>
            <ng-template #noDescription>
              <span class="text-muted">-</span>
            </ng-template>
          </td>
          <td>{{ functionality.minimumPrice | currency:'BRL':'symbol':'1.2-2' }}</td>
          <td>
            <span *ngIf="functionality.defaultAssistantPrice; else noAssistantPrice">
              {{ functionality.defaultAssistantPrice | currency:'BRL':'symbol':'1.2-2' }}
            </span>
            <ng-template #noAssistantPrice>
              <span class="text-muted">-</span>
            </ng-template>
          </td>
          <td>
            <span class="badge" [class]="functionality.status === 'ACTIVE' ? 'bg-success' : 'bg-secondary'">
              {{ functionality.status === 'ACTIVE' ? 'Ativo' : 'Inativo' }}
            </span>
          </td>
          <td>{{ functionality.createdAt | date:'dd/MM/yyyy' }}</td>
          <td>
            <div class="btn-group btn-group-sm">
              <button class="btn btn-outline-primary" title="Visualizar">
                <i class="bi bi-eye"></i>
              </button>
              <button class="btn btn-outline-warning" title="Editar">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn btn-outline-danger" title="Excluir">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
